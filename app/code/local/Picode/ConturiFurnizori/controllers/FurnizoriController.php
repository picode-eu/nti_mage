<?php
class Picode_ConturiFurnizori_FurnizoriController extends Mage_Core_Controller_Front_Action{    public function IndexAction()    {        $this->loadLayout();                $this->_initLayoutMessages('customer/session');        $this->_initLayoutMessages('catalog/session');                $this->getLayout()->getBlock('head')->setTitle($this->__('Furnizori Servicii Nunta'));                $breadcrumbs = $this->getLayout()->getBlock("breadcrumbs");        $breadcrumbs->addCrumb("home", array(                "label" => $this->__("Home Page"),                 "title" => $this->__("Home Page"),                 "link" => Mage::getBaseUrl()            )        );        $breadcrumbs->addCrumb("furnizori",             array(                "label" => $this->__("Furnizori Servicii Nunta"),                 "title" => $this->__("Furnizori Servicii Nunta"),            )        );                    $this->renderLayout();    }        public function FotoAction()    {        $this->loadLayout();                $this->_initLayoutMessages('customer/session');        $this->_initLayoutMessages('catalog/session');                $this->getLayout()->getBlock('head')->setTitle($this->__('Furnizori Servicii Foto'));                $breadcrumbs = $this->getLayout()->getBlock("breadcrumbs");        $breadcrumbs->addCrumb("home", array(                "label" => $this->__("Home Page"),                 "title" => $this->__("Home Page"),                 "link" => Mage::getBaseUrl()            )        );        $breadcrumbs->addCrumb("furnizori",             array(                "label" => $this->__("Furnizori"),                 "title" => $this->__("Furnizori"),                "link"  => Mage::getUrl('conturifurnizori/furnizori')            )        );
        $breadcrumbs->addCrumb("foto",             array(                "label" => $this->__("Servicii Foto"),                 "title" => $this->__("Servicii Foto"),            )        );                $this->renderLayout();    }        public function VideoAction()    {        $this->loadLayout();                $this->_initLayoutMessages('customer/session');        $this->_initLayoutMessages('catalog/session');                $this->getLayout()->getBlock('head')->setTitle($this->__('Furnizori Servicii Video'));                $breadcrumbs = $this->getLayout()->getBlock("breadcrumbs");        $breadcrumbs->addCrumb("home", array(                "label" => $this->__("Home Page"),                 "title" => $this->__("Home Page"),                 "link" => Mage::getBaseUrl()            )        );        $breadcrumbs->addCrumb("furnizori",             array(                "label" => $this->__("Furnizori"),                 "title" => $this->__("Furnizori"),                "link"  => Mage::getUrl('conturifurnizori/furnizori')            )        );        $breadcrumbs->addCrumb("video",             array(                "label" => $this->__("Servicii Video"),                 "title" => $this->__("Servicii Video"),            )        );                $this->renderLayout();    }        public function FotovideoAction()    {        $this->loadLayout();                $this->_initLayoutMessages('customer/session');        $this->_initLayoutMessages('catalog/session');                $this->getLayout()->getBlock('head')->setTitle($this->__('Furnizori Servicii Foto-Video'));                $breadcrumbs = $this->getLayout()->getBlock("breadcrumbs");        $breadcrumbs->addCrumb("home", array(                "label" => $this->__("Home Page"),                 "title" => $this->__("Home Page"),                 "link" => Mage::getBaseUrl()            )        );        $breadcrumbs->addCrumb("furnizori",             array(                "label" => $this->__("Furnizori"),                 "title" => $this->__("Furnizori"),                "link"  => Mage::getUrl('conturifurnizori/furnizori')            )        );        $breadcrumbs->addCrumb("foto-video",             array(                "label" => $this->__("Servicii Foto-Video"),                 "title" => $this->__("Servicii Foto-Video"),            )        );                $this->renderLayout();    }        public function ProfilAction()    {        $this->loadLayout();                $this->_initLayoutMessages('customer/session');        $this->_initLayoutMessages('catalog/session');                $params = $this->getRequest()->getParams();                foreach ($params as $key => $val) {            if (is_numeric($val)) {                $providerId = (int) $val;            } else {                $providerId = false;                unset($key);            }        }                if ($providerId) {            $provider = Mage::getModel('customer/customer')->load($providerId);                        switch ($provider->getFurnizorCompanyServices()) {                case '1':                    $keywords = 'fotograf nunta,fotograf de nunta,foto nunta,servicii foto nunta,album nunta,albume nunta,';                    $keywords .= 'fotograf nunta ' . strtolower($provider->getFurnizorLocationCity()) . ',';                    $keywords .= 'servicii foto nunta ' . strtolower($provider->getFurnizorLocationCity()) . ',';                    break;                                    case '2':                    $keywords = 'video nunta,servicii video nunta,cameraman nunta,cameraman de nunta,';                    $keywords .= 'videograf nunta,videograf de nunta,videograf nunta ' . strtolower($provider->getFurnizorLocationCity()) . ',';                    $keywords .= 'cameraman nunta ' . strtolower($provider->getFurnizorLocationCity()) . ',';                    $keywords .= 'servicii video nunta ' . strtolower($provider->getFurnizorLocationCity());                    break;                                    case '3':                    $keywords = 'fotograf nunta,fotograf de nunta, foto video nunta, servicii foto video nunta,foto video nunta ' . strtolower($provider->getFurnizorLocationCity()) . ',';                    $keywords .= 'cameraman nunta,cameraman de nunta ' . strtolower($provider->getFurnizorLocationCity()) . ',';                    $keywords .= 'servicii foto video nunta ' . strtolower($provider->getFurnizorLocationCity());                    break;                                    default:                    $keywords = 'foto video nunta, foto video penru nunta, servicii foto video nunta, fotograf cameraman nunta ' . strtolower($provider->getFurnizorLocationCity());                    break;            }                        $this->getLayout()->getBlock('head')                        ->setTitle($this->__(strip_tags($provider->getBusinessDescriptionsTitle()) . ' | ' . strip_tags($provider->getFurnizorLocationCity())))                        ->setDescription(Mage::helper('conturifurnizori')->stringTruncate(strip_tags($provider->getBusinessDescriptionsDesc() . ' ' . strip_tags($provider->getFurnizorLocationCity())), 160, true))                        ->setKeywords($keywords);                                                            $breadcrumbs = $this->getLayout()->getBlock("breadcrumbs");            $breadcrumbs->addCrumb("home", array(                    "label" => $this->__("Home Page"),                     "title" => $this->__("Home Page"),                     "link" => Mage::getBaseUrl()                )            );            $breadcrumbs->addCrumb("furnizori",                 array(                    "label" => $this->__("Furnizori"),                     "title" => $this->__("Furnizori"),                    "link"  => Mage::getUrl('conturifurnizori/furnizori')                )            );                        $refererUrl = $this->_getRefererUrl();            if (empty($refererUrl)) {                $refererUrl = empty($defaultUrl) ? Mage::getBaseUrl() : $defaultUrl;            }                        $urlPart = parse_url($refererUrl);            $urlPartArr = explode('/', trim($urlPart['path'], '/'));                        if (count($urlPartArr) == 3 && end($urlPartArr) != 'index') {                                    switch (strtolower(end($urlPartArr))) {
                    case 'fotovideo':
                        $titleLabel = 'Servicii Foto-Video';                        $link = 'foto-video';
                        break;                    default:
                        $titleLabel = 'Servicii ' . ucwords(end($urlPartArr));                        $link = strtolower(end($urlPartArr));
                        break;
                }                                $breadcrumbs->addCrumb(strtolower(end($urlPartArr)),                     array(                        "label" => ucwords($titleLabel),                         "title" => ucwords($titleLabel),                        "link"  => Mage::getUrl('conturifurnizori/furnizori/' . $link)                    )                );            }                        $breadcrumbs->addCrumb("profil",                 array(                    "label" => $provider->getBusinessDescriptionsTitle(),                     "title" => $provider->getBusinessDescriptionsTitle(),                )            );                                    $this->renderLayout();                    } else {            $this->_redirect('*/*/');            return;        }    }   }
